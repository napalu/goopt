<script>
  function updateTheme() {
    // Check if GitHub is in dark mode
    const isDark = document.documentElement.dataset.colorMode === 'dark' || 
                  (document.documentElement.dataset.colorMode === 'auto' && 
                   window.matchMedia('(prefers-color-scheme: dark)').matches);
    
    // Get current stylesheet
    const currentTheme = document.querySelector('[data-theme-stylesheet]');
    const newTheme = isDark ? 'dark' : 'light';
    
    // Update stylesheet if needed
    if (!currentTheme || !currentTheme.href.includes(newTheme)) {
      const link = currentTheme || document.createElement('link');
      link.setAttribute('rel', 'stylesheet');
      link.setAttribute('data-theme-stylesheet', '');
      link.href = '{{ site.baseurl }}/assets/css/just-the-docs-' + newTheme + '.css';
      
      if (!currentTheme) {
        document.head.appendChild(link);
      }
    }
  }

  // Initial theme setup
  updateTheme();

  // Watch for GitHub theme changes
  const observer = new MutationObserver(updateTheme);
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-color-mode']
  });
</script> 